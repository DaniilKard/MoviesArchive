function createModal(n){function h(){t.remove()}function w(n){["modal__block_btns_confirm","modal__block_btns_cancel","modal__block_close"].includes(n.target.id)||(n.preventDefault(),c=n.clientX,l=n.clientY,t.addEventListener("mousemove",y),t.addEventListener("mouseup",s),t.addEventListener("mouseleave",s))}function y(n){a=c-n.clientX;v=l-n.clientY;c=n.clientX;l=n.clientY;i.style.left=i.offsetLeft-a+"px";i.style.top=i.offsetTop-v+"px"}function s(){t.removeEventListener("mouseup",s);t.removeEventListener("mousemove",y);t.removeEventListener("mouseleave",s)}const t=document.createElement("div"),i=document.createElement("div"),f=document.createElement("button"),r=document.createElement("p"),u=document.createElement("button"),e=document.createElement("button"),o=document.createElement("div");t.className="modal";i.className="modal__block";f.id="modal__block_close";f.className="modal__block_close";r.className="modal__block_description";o.className="modal__block_btns";u.id="modal__block_btns_confirm";u.classList.add("modal__block_btns_confirm","button");f.textContent="✖";u.textContent="Ok";switch(n){case 200:r.textContent="Movies were added successfully";break;case 400:r.textContent="An error occurred: your profile already contains all movies listed in file or folder contains multiple .md or .docx files";break;case 404:r.textContent="An error occurred: folder does not exist or contains no files with appropriate extension (.md or .docx)";break;default:r.textContent="Unknown error, movies are not added"}if(o.append(u),i.append(f,r),n==200){const n=document.createElement("p");n.className="modal_reload";n.textContent="Reload this page to view new movies?";i.append(n);e.id="modal__block_btns_cancel";e.classList.add("modal__block_btns_cancel","button");e.textContent="Cancel";o.append(e)}i.append(o);t.append(i);const p=document.getElementById("main");p.append(t);f.addEventListener("click",h);n==200?(u.addEventListener("click",()=>{location.reload()}),e.addEventListener("click",h)):u.addEventListener("click",h);let a=0,v=0,c=0,l=0;i.addEventListener("mousedown",w)}function removeBtnsContainerOnLeave(){const t=document.getElementById("body__row_movie_btns_container"),n=document.getElementById("body__row_movie_btns");!t&&n&&n.remove()}document.getElementById("fetchMoviesBtn").addEventListener("click",()=>{fetch("/Movie/AddFileToDatabase").then(n=>n.status).then(n=>{createModal(n)}).catch(n=>console.error("Error in movie fetch: ",n))});const movieRows=document.getElementsByClassName("body__row");for(let n=0;n<movieRows.length;n++)movieRows[n].addEventListener("mouseenter",()=>{function u(){const t=document.getElementById("body__row_movie_btns_container");if(!t){const t=document.createElement("div");t.id="body__row_movie_btns_container";t.className="body__row_movie_btns_container";const i=document.createElement("a"),r=document.createElement("a");i.innerHTML='<img src="img/editBtn.svg" /> Edit';r.innerHTML='<img src="img/deleteBtn.svg" /> Delete';i.className="body__row_movie_btns_container_edit";r.className="body__row_movie_btns_container_delete";let u=movieRows[n].getAttribute("data-id");i.href=`/Movie/EditMovie/${u}`;r.href=`/Movie/DeleteMovie/${u}`;const f=document.getElementById("body__row_movie_btns");t.append(i,r);f.append(t);document.addEventListener("click",n=>{const t=document.getElementById("body__row_movie_btns_menu");n.target!=t&&f.remove()})}}const r=document.getElementById("body__row_movie_btns_menu");if(!r){const t=document.createElement("div");t.id="body__row_movie_btns";t.className="body__row_movie_btns";const i=document.createElement("div");i.textContent="●●●";i.id="body__row_movie_btns_menu";i.className="body__row_movie_btns_menu";t.append(i);movieRows[n].append(t);t.addEventListener("click",u)}}),movieRows[n].addEventListener("mouseleave",removeBtnsContainerOnLeave);